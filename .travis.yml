---
language: node_js
node_js:
  - "6"

sudo: false
dist: trusty

addons:
  firefox: "51.0"

cache:
  yarn: true

env:
  matrix:
  - EMBER_TRY_SCENARIO=ember-1-13
  - EMBER_TRY_SCENARIO=ember-2-4
  - EMBER_TRY_SCENARIO=ember-2-8
  - EMBER_TRY_SCENARIO=ember-2-10
  - EMBER_TRY_SCENARIO=default

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH=$HOME/.yarn/bin:$PATH
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "npm config set spin false"
  - "npm install -g npm@^2"

install:
  - yarn install --no-lockfile

script:
  - node_modules/.bin/ember try:one $EMBER_TRY_SCENARIO test --skip-cleanup

deploy:
  provider: npm
  email: admin@ember-redux.com
  skip_cleanup: true
  api_key:
    secure: nYDa4ZEyX7MMqwvtD0N8BTn6X1KFd5NUpVKsOlNif2Y8eZSeQkoeD8h/cNRE8U5nmiWE5ssQYSkbz6igcrHpDetlNDSZDTe57dH5LLZ7ATBYQtiwjj7HPTz73hKxAZwFhCu0bQmRylPF+z8rp2RV7hES0XoOrSz9PLf/W7MAvEDAlHS35sJcqef+L8C3ZT+gK/nwc9TV/563O4UDgUDn59wwiu+it25KwcYFFIPZ/EH+vvXwd8klC94TgE60IAKxgHAyeE/FhkaF+PVWF7cdjDLsIwa/+/2/0uNmUoAe8Y/XTeTZuHa6+8BUpoj++H5jw0EpTi+5YzBi88g7O7uPa/na0bPiMJFQ5nXn3538fqaf8dVZs47/Tjs5tp79xSDlt+TSrxKs01J8nNFMEMqRt2Ipk6WMUaI34mPTNwbzxLARjodesHKZqqcT6HG08N2jJ75qlY6F2O+sAKzdX2baB94C50ep9YMy2UhEujJ/V+van7GcDjZl3tJAtOK8X36aPfKk0ZawZfYaHbiTbNmLYItf5FdCWAMLOD8rmGszBBYAKQ2lEn8JrxtmbnHXbgVOuYoFa8nQlPCdlnMCeSsUctykcMZDhEXl8j3BNjryoOaoZHX+JGAezaPPTyagsodETnNnllnLRXQ5DPwS+zh3jVkKRTR28Qqo5/70f6Yqbfc=
  on:
    all_branches: true
    condition: "$EMBER_TRY_SCENARIO = 'default'"
    node: 'stable'
    tags: true
